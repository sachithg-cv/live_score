<div *ngIf="inning">
    <c-card class="mb-3">
        <c-card-header>{{matchTitle}}&nbsp;{{inningType}}</c-card-header>
        <c-card-body class="p-4">
            <span *ngIf="isEditingMode">*Currently in the editing mode</span>
            <form cForm [formGroup]="scoreSubmitForm" (ngSubmit)="submitForm()">
                <div class="mb-3">
                    <span>{{inning.batting.name}}&nbsp;Batsmen</span>
                    <span *ngIf="scoreSubmitForm.get('batsman')?.errors?.['required']">*required</span>
                    <c-form-check *ngFor="let player of inning.batting.players; let i = index">
                        <input cFormCheckInput type="radio" [value]="player._id" name="batsman" formControlName="batsman"/>
                        <label cFormCheckLabel>{{player.firstName +' '+ player.lastName}}</label>
                    </c-form-check>
                </div>
                <div class="mb-3" *ngIf="!isEditingMode">
                    <span>{{inning.bowling.name}}&nbsp;Bowlers</span>
                    <span *ngIf="scoreSubmitForm.get('bowler')?.errors?.['required']">*required</span>
                    <c-form-check *ngFor="let player of inning.bowling.players; let i = index">
                        <input cFormCheckInput type="radio" [value]="player._id" name="bowler" formControlName="bowler"/>
                        <label cFormCheckLabel>{{player.firstName +' '+ player.lastName}}</label>
                      </c-form-check>
                </div>
                <div class="mb-3">
                    <span>Runs</span>
                    <span *ngIf="scoreSubmitForm.get('runs')?.errors?.['required']">*required</span>
                    <c-form-check *ngFor="let run of runs; let i = index">
                        <input cFormCheckInput type="radio" [value]="run" name="runs" formControlName="runs"/>
                        <label cFormCheckLabel>{{run}}</label>
                      </c-form-check>
                </div>
                <div class="mb-3">
                    <span>Illegal delivery</span>
                    <c-form-check *ngFor="let illegalDelivery of illegalDeliveries; let i = index">
                        <input cFormCheckInput type="radio" [value]="illegalDelivery.value" name="illegalDelivery" formControlName="illegalDelivery"/>
                        <label cFormCheckLabel>{{illegalDelivery.name}}</label>
                      </c-form-check>
                </div>
                <div class="mb-3">
                    <span>Extras</span>
                    <c-form-check *ngFor="let extra of extrasType; let i = index">
                        <input cFormCheckInput type="radio" [value]="extra" name="extraType" formControlName="extraType"/>
                        <label cFormCheckLabel>{{extra}}</label>
                      </c-form-check>
                </div>
                <div class="mb-3">
                    <span>Wicket</span>
                    <c-form-check [switch]="true">
                        <input cFormCheckInput type="checkbox" formControlName="wicket"/>
                        <label cFormCheckLabel>Is wicket</label>
                      </c-form-check>
                </div>
                <div class="d-grid gap-2 d-md-flex justify-content-md-start">
                    <button type="submit" cButton color="success">{{isEditingMode? 'Update':'Publish'}}</button>
                    <button type="button" cButton *ngIf="!isEditingMode" (click)="syncData()" color="danger">Sync</button>
                    <button type="button" cButton *ngIf="isEditingMode" (click)="cancelEditDelivery()" color="danger">Cancel</button>
                  </div>
                <!-- <div class="d-grid gap-2 d-md-flex justify-content-md-start">
                  <button type="button" (click)="cancel()" cButton color="danger">Cancel</button>
                  <button type="submit" cButton color="success">Submit</button>
                </div> -->
                <!-- <div *ngIf="matchTossResultForm.get('team')?.touched && matchTossResultForm.errors">
                    <p *ngIf="matchTossResultForm.errors['sameTeamSelected']">
                        Select two different teams
                    </p>
                    <p *ngIf="matchTossResultForm.errors['noConnection']">
                        No network connection
                    </p>
                    <p *ngIf="matchTossResultForm.errors['unknownError']">
                        Failed to Signup
                    </p>
                </div>
                {{ matchTossResultForm.value | json }}
                {{ matchTossResultForm.status}} -->
              </form>    
        </c-card-body>
    </c-card>
    <c-card class="mb-3" *ngIf="currentOverList && currentOverList.length > 0">
        <c-card-header>Current over - {{this.inning.currentOver + 1}}</c-card-header>
        <c-card-body class="p-4">
            <c-button-toolbar aria-label="Toolbar with button groups" role="group">
                <c-button-group class="me-2" role="group" *ngFor="let currentBall of currentOverList; let i = index">
                    <button type="button" cButton [color]="currentBall.isWicket? 'warning': currentBall.isLegal ? 'success':'danger'" (click)="loadDelivery(currentBall)">{{currentBall.isWicket? 'W': currentBall.runs + currentBall.extraRuns}}</button>
                </c-button-group>
            </c-button-toolbar>
            <button type="button" cButton color="primary" (click)="endOver()">Complete</button>
        </c-card-body>
    </c-card>
    <c-card class="mb-3" *ngIf="previousOverList && previousOverList.length > 0">
        <c-card-header>Previous over - {{this.inning.currentOver}}</c-card-header>
        <c-card-body class="p-4">
            <c-button-toolbar aria-label="Toolbar with button groups" role="group">
                <c-button-group class="me-2" role="group" *ngFor="let currentBall of previousOverList; let i = index">
                    <button type="button" cButton [color]="currentBall.isWicket? 'warning': currentBall.isLegal ? 'success':'danger'" (click)="loadDelivery(currentBall)">{{currentBall.isWicket? 'W': currentBall.runs + currentBall.extraRuns}}</button>
                </c-button-group>
            </c-button-toolbar>
        </c-card-body>
    </c-card>
    {{scoreSubmitForm.value | json}}
    {{scoreSubmitForm.status}}
    
</div>

<p-dialog header="Header" [(visible)]="editDeliveryModalVisible" [modal]="true" [style]="{ width: '80vw' }" [draggable]="false">
    <div class="d-grid gap-2 d-md-flex justify-content-md-center">
        <button type="button" cButton color="danger" (click)="removeDelivery()" [disabled]="editingDelivery && editingDelivery.over===inning.currentOver">Remove</button>
        <button type="button" cButton (click)="loadEditDelivery()" color="success">Edit</button>
        <button type="button" cButton (click)="closeEditDeliveryDialog()" color="warning">Cancel</button>
      </div>
</p-dialog>